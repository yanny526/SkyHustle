# SkyHustle - Telegram RPG Game

SkyHustle is a Telegram-based strategy RPG where players build and manage futuristic aerial bases, train diverse armies, research cutting-edge technologies, form alliances, and engage in PvE/PvP battlesâ€”all via intuitive chat commands and interactive menus.

## Features

- Build and manage your aerial base with various building types
- Train units for combat and defense
- Research technologies to unlock new capabilities
- Create or join alliances with other players
- Attack other players and participate in alliance wars
- Track achievements and progress on leaderboards

## Technical Architecture

- **Telegram Bot**: Uses python-telegram-bot library to interact with users
- **Data Storage**: Google Sheets as the backend database
- **Web Dashboard**: Flask web application for administrative oversight

## Dependencies

```
email-validator>=2.2.0
flask>=3.1.0
flask-sqlalchemy>=3.1.1
gspread>=6.2.0
gunicorn>=23.0.0
oauth2client>=4.1.3
psycopg2-binary>=2.9.10
python-dotenv>=1.1.0
python-telegram-bot==13.15
telegram>=0.0.1
werkzeug>=3.1.3
```

## Environment Variables

- `BOT_TOKEN`: Telegram Bot API token for the bot
- `BASE64_CREDS`: Base64-encoded Google service account credentials JSON
- `SHEET_ID`: Google Sheet ID where game data is stored
- `SESSION_SECRET`: Secret key for Flask sessions

## Running the Bot

1. Clone the repository
2. Install dependencies: `pip install -r deploy-requirements.txt`
3. Set up environment variables (use a .env file for local development)
4. Run the bot: `python main.py`

## Web Dashboard

A Flask-based web dashboard is provided for administrative purposes. This allows viewing game statistics and monitoring player activity.

To run the web dashboard:
```
gunicorn --bind 0.0.0.0:5000 main:app
```

## Deployment to Render

This project is configured for easy deployment to Render using GitHub.

### Deployment Steps:

1. Push this code to a GitHub repository
2. Sign up for a Render account at [render.com](https://render.com)
3. Connect your GitHub account to Render
4. Create a new "Blueprint" on Render and select your GitHub repository
5. Render will automatically detect the `render.yaml` configuration
6. Set the required environment variables:
   - `BOT_TOKEN`: Your Telegram bot token
   - `BASE64_CREDS`: Your Base64-encoded Google service account credentials
   - `SHEET_ID`: Your Google Sheet ID
   - `SESSION_SECRET` will be automatically generated by Render

Render will deploy two services:
- A web service for the admin dashboard
- A worker service that runs the Telegram bot

## Game Commands

The following commands are available to players:

- `/start` - Begin your journey
- `/status` - View your resources and base
- `/build <structure> [quantity]` - Construct buildings
- `/train <unit> [count]` - Train military units
- `/research [tech_id]` - Research technologies
- `/alliance <subcmd>` - Manage your alliance
- `/attack <player_id>` - Attack another player
- `/scan` - Find potential targets
- `/daily` - Claim daily reward
- `/setname <n>` - Change your display name
- `/tutorial` - Restart the tutorial
- ... and more!